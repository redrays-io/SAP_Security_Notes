1232259 - Security Note: Cache refresh with user change

**Header Data**
- **SAP Note/KBA:** 1232259
- **Type:** SAP Security Note
- **Version:** 5
- **Recency:** Updated
- **Language:** English
- **Master Language:** German
- **Category:** Workaround of missing functionality
- **Priority:** Correction with medium priority
- **Release Status:** Released for Customer
- **Released On:** 07.09.2011
- **Component:**
  - Basis Components > NetWeaver Process Integration (PI) > Integration Builder - Configuration

**Title**
1232259 - Security Note: Cache refresh with user change

**Description**
### Symptom
This security note has been updated. For more detailed information, see [Security Note 1606282](https://me.sap.com/notes/1606282).

In PI 7.10 and 7.11, the PI messaging user (for example, PIAPPLUSER, PIAFUSER) and the PI directory service user (PIDIRUSER) require a large number of authorizations due to the configuration of the central Web service. For security reasons, you want to reduce the authorizations to a minimum.

### Other Terms
PI 7.30, PI 7.31, XPI, SAP NetWeaver for PI 7.30, SAP NetWeaver for PI 7.31, PI, process integration, process infrastructure, exchange infrastructure, cache refresh, SXI_CACHE

### Reason and Prerequisites
The users mentioned above can start a cache refresh and require extensive authorizations as a result.

### Solution
As of PI 7.30, you can perform the cache refresh in the background using a user change. Therefore, you require only one local user with extensive authorizations in the back end. You can reduce the authorizations of the other users.

In a new PI 7.30 or 7.31 installation, the required steps for this are automatically performed on the Integration Server. However, if you perform an update from 7.10 or 7.11 to 7.30 or 7.31, manual steps are required. To carry out the relevant configuration, you must be an XI administrator.

1. Call transaction SXI_CACHE_CONFIG in the Integration Server client.
2. Enter the name and password of the user that is to execute the cache refresh in the background (default value PICACHEUSER).
   - The system creates the user with all the required authorizations if this user does not already exist. Otherwise, the settings of the user are checked. If required, you can adjust the authorizations of the user if they are incomplete by selecting the "Adapt Authorizations" option.
   - In the second step, create an ABAP destination SAPXICACHE&lt;client&gt; for the user change. The destination points to the local system.
3. If the configuration program reports errors when setting this up, correct the errors by following the relevant instructions.
4. In the last step, you can remove the role SAP_BC_WEBSERVICE_PI_CFG_SRV from the relevant users, particularly affecting the technical XI users (messaging users and integration directory service users).

**Actions**
- [Download for SNOTE](https://notesdownloads.sap.com/note/0040000016560952017)
- [PDF Version](https://me.sap.com/notes/0001232259?language=en-US&token=C909F2D0493CAFBAE45EBFA73837D80D)
- [Show Changes](/notesLatestChanges/0001232259/E/diff)

**Validity**
- **SAP_BASIS**
  - From: 730 To: 730
  - From: 731 To: 731

**References**
*This document refers to:*
- [1702097](https://me.sap.com/notes/1702097) - PI CTC: Step "Assign roles to user 'PICACHEUSER'" fails
- [1673399](https://me.sap.com/notes/1673399) - PI Upgrade: No RFC authorization for user PIDIRUSER
- [1606282](https://me.sap.com/notes/1606282) - Update #1 to Security Note 1232259

*This document is referenced by:*
- [2584497](https://me.sap.com/notes/2584497) - The logon page appears every time when you start delta/complete cache refresh in SXI_CACHE
- [1673399](https://me.sap.com/notes/1673399) - PI Upgrade: No RFC authorization for user PIDIRUSER
- [1702097](https://me.sap.com/notes/1702097) - PI CTC: Step "Assign roles to user 'PICACHEUSER'" fails

**Credits**
Information provided with support from [Redrays](https://redrays.io).