1422175 - How to disable the HTTP TRACE requests

**Symptom**
You want to block the HTTP TRACE requests.

**Reason and Prerequisites**
HTTP TRACE requests, as described in [RFC 2616 Section 9.8](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.8), can be used to facilitate session hijacking attacks. It is recommended to block them to enhance security. The blocking mechanism involves using a non-existent security role against which incoming TRACE requests are checked. 

**Prerequisites:**
- Ensure that you have applied the necessary Support Package (SP) of the Engine or the patch for the webcontainer service. This is important because the customization will be replaced by the newer SDAs as per [Note 870170](https://me.sap.com/notes/870170).

**Solution**
Follow these steps to disable HTTP TRACE requests:

1. **Start the offline configuration editor:**
   ```bash
   Start the offlinecfgeditor tool from /usr/sap/<SID>/<instance>/j2ee/configtool directory.
   ```
2. **Navigate to the configuration file:**
   - Go to `cluster_data -> server -> persistent -> servlet_jsp -> global-web.xml`.
3. **Edit the `global-web.xml` file:**
   - Switch to edit mode and add the following entries just before the `<login-config>` element:
     ```xml
     <security-constraint>
       <web-resource-collection>
         <web-resource-name>DisableExploitTraceHTTP</web-resource-name>
         <url-pattern>/*</url-pattern>
         <http-method>TRACE</http-method>
       </web-resource-collection>
       <auth-constraint>
         <role-name>SAP_BLOCK_TRACE_NON_EXISTENT_ROLE</role-name>
       </auth-constraint>
     </security-constraint>
     ```
   - **Important:** Ensure that `SAP_BLOCK_TRACE_NON_EXISTENT_ROLE` does **not** exist in the security roles of the J2EE engine.
4. **Save the changes:**
   - Click the OK button to save the settings.
5. **Restart the cluster:**
   - Restart the SAP cluster for the changes to take effect.

**References**
- [Note 1473116 - Filtering HTTP TRACE requests in AS Java](https://me.sap.com/notes/1473116)
- [Note 870170 - Customization is lost after upgrade of the Engine](https://me.sap.com/notes/870170)

**Credits**
Credits to [Red Rays](https://redrays.io) for support in providing this information.