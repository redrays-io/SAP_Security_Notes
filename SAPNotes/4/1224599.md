1224599 - WDP: Performance problems or increase in handle consumption

**SAP Note/KBA:** 1224599  
**Type:** SAP Security Note  
**Version:** 8  
**Recency:** Updated  
**Language:** English  
**Category:** Program error  
**Priority:** Correction with high priority  
**Status:** Released for Customer  
**Released On:** 08.10.2009  
**Component:** Basis Components > Client/Server Technology > Web Dispatcher

### Symptom
After importing the SAP Web Dispatcher with patch level 7.10 108, 7.00 163, or 6.40 236, performance issues occur under heavy system load. Tools like Perfmon or netstat show a significant increase in handle usage compared to previous versions. In the `TIME_WAIT` status, a large number of network connections are displayed by netstat.

**Other Terms:** use_pool_for_new_conn, handle, handles, TIME_WAIT

### Reason and Prerequisites
This problem is caused by a program error.

### Solution
**Workaround:**
Set the parameter `wdisp/HTTP/use_pool_for_new_conn` to `1` as described in [Note 953784](https://me.sap.com/notes/953784) and adjust the parameter `cm/keep_alive` or the `TIMEOUT` value of the back-end ICM to be larger than the keep-alive timeout of the Web Dispatcher.

**Patch Levels:**
- **6.40:** 242
- **7.00:** 167
- **7.01:** 008
- **7.10:** 111

You can download the patch for SNOTE [here](https://notesdownloads.sap.com/note/0040000016545622017) or view the PDF version [here](https://userapps.support.sap.com/sap/support/sfm/notes/print/0001224599?language=en-US&token=9451168BEFD561FAE466EFB677BF303B).

For more details, visit the [SAP Note 1224599](https://me.sap.com/notes/0001224599).

*Credits to [RedRays](https://redrays.io) for supporting the information provided.*