2531131 - Switchable Authorization checks for RFC BCA_DIM_WRITE_OFF in Loans (FI-CAX-FS)

**SAP Security Note 2531131**

**Type:** SAP Security Note  
**Category:** Program error  
**Priority:** Correction with medium priority  
**Status:** Released for Customer  
**Released On:** 27.02.2018  
**Component:** Financial Accounting > Non-industry specific contract accounts receivable, payable > Integration Banking Services

---

### Symptom
S_RFC authorization checks are not sufficient to ensure the secure execution of RFC function modules covered by this SAP Note. New switchable authorization checks have been implemented for RFC function modules in FI-CAX-FS.

### Reason and Prerequisites
Remote calls to RFC function modules are protected by the authorization object **S_RFC**. It's essential to ensure that:
- **S_RFC** authorizations are limited to the minimum required to maintain system security.
- Many RFC function modules need additional functional authorization checks beyond **S_RFC**.

**Prerequisites:**
1. Implement [SAP Note 2531511](https://me.sap.com/notes/2531511) for defining global variables for scenarios.
2. Implement [SAP Note 2449051](https://me.sap.com/notes/2449051) for documentation of SACF scenarios.
3. **Manual Pre-requisite:** Implement [SAP Note 2537070](https://me.sap.com/notes/2537070) - "Message class BCA_MCL_DIM_LOAN updated with new Message 061".

### Solution
New switchable authorization checks have been implemented and are delivered inactive to ensure compatibility with existing processes. These checks can be activated in transaction **SACF** following the manual correction instructions.

#### New Authorization Scenario
- **FS_TB_WRITEOFF** – Scenario for Write Off functionality

#### Affected RFC Function Module
- **BCA_DIM_WRITE_OFF**
  - **Authorization Object:** F_KKWOFF
  - **Activity:** '10' (Post)

### Implementation Steps

#### Step 1: Manual Pre-Implementation
Implement [SAP Note 2537070](https://me.sap.com/notes/2537070) as a manual pre-requisite step.

#### Step 2: Create Authorization Scenario Definition
1. Start transaction **SACF** in the development system.
2. Check if the scenario definition **FS_TB_WRITEOFF** exists.
   - If it exists, proceed to Step 3.
   - If not, download the [FS_TB_WRITEOFF.TXT](https://userapps.support.sap.com/sap/support/sapnotes/public/services/attachment.htm?iv_key=002075125900001838962017&iv_version=0002&iv_guid=6CAE8B28C71B1ED7B0D739F1A63000D1) attachment.
3. Use transaction **SACF_TRANSFER**:
   - Select the "Upload" radio button.
   - Select work area "Scenario Definition".
   - Deselect "Productive Scenarios" and "Test Mode".
   - Execute (F8) and upload the downloaded file.
4. Assign the scenario definition **FS_TB_WRITEOFF** to the development package **FSCR_TRBK**.

#### Step 3: Activate Switchable Authorization Checks
1. Use transaction **SACF** to create productive authorization scenarios from scenario definitions.
2. Alternatively, after system updates, use transaction **SACF_COMPARE** for collective maintenance.
3. Ensure authorized users have all required authorizations as detailed in [SAP Note 1922808](https://me.sap.com/notes/1922808).

### Attachments
- [FS_TB_WRITEOFF.TXT](https://userapps.support.sap.com/sap/support/sapnotes/public/services/attachment.htm?iv_key=002075125900001838962017&iv_version=0002&iv_guid=6CAE8B28C71B1ED7B0D739F1A63000D1)

### Support Packages
Ensure the following support packages are applied for respective software component versions:

| Software Component Version | Support Package                   | URL                                           |
|----------------------------|-----------------------------------|-----------------------------------------------|
| FI-CAX 602                 | [SAPK-60220INFICAX](https://me.sap.com/supportpackage/SAPK-60220INFICAX) | [Link](https://me.sap.com/supportpackage/SAPK-60220INFICAX) |
| FI-CAX 603                 | [SAPK-60319INFICAX](https://me.sap.com/supportpackage/SAPK-60319INFICAX) | [Link](https://me.sap.com/supportpackage/SAPK-60319INFICAX) |
| FI-CAX 604                 | [SAPK-60420INFICAX](https://me.sap.com/supportpackage/SAPK-60420INFICAX) | [Link](https://me.sap.com/supportpackage/SAPK-60420INFICAX) |
| FI-CAX 605                 | [SAPK-60517INFICAX](https://me.sap.com/supportpackage/SAPK-60517INFICAX) | [Link](https://me.sap.com/supportpackage/SAPK-60517INFICAX) |
| FI-CAX 606                 | [SAPK-60620INFICAX](https://me.sap.com/supportpackage/SAPK-60620INFICAX) | [Link](https://me.sap.com/supportpackage/SAPK-60620INFICAX) |
| FI-CAX 616                 | [SAPK-61612INFICAX](https://me.sap.com/supportpackage/SAPK-61612INFICAX) | [Link](https://me.sap.com/supportpackage/SAPK-61612INFICAX) |
| FI-CAX 617                 | [SAPK-61715INFICAX](https://me.sap.com/supportpackage/SAPK-61715INFICAX) | [Link](https://me.sap.com/supportpackage/SAPK-61715INFICAX) |
| FI-CAX 618                 | [SAPK-61809INFICAX](https://me.sap.com/supportpackage/SAPK-61809INFICAX) | [Link](https://me.sap.com/supportpackage/SAPK-61809INFICAX) |
| FI-CAX 800                 | [SAPK-80006INFICAX](https://me.sap.com/supportpackage/SAPK-80006INFICAX) | [Link](https://me.sap.com/supportpackage/SAPK-80006INFICAX) |
| FI-CAX 801                 | [SAPK-80104INFICAX](https://me.sap.com/supportpackage/SAPK-80104INFICAX) | [Link](https://me.sap.com/supportpackage/SAPK-80104INFICAX) |
| FI-CAX 802                 | [SAPK-80201INFICAX](https://me.sap.com/supportpackage/SAPK-80201INFICAX) | [Link](https://me.sap.com/supportpackage/SAPK-80201INFICAX) |

### Correction Instructions
9 Correction Instructions are available [here](https://me.sap.com/corrins/0002531131/262).

### Preconditions
Ensure the following SAP Notes are implemented based on your software component versions:

- **FI-CAX-FS:**
  - [2531511](https://me.sap.com/notes/2531511) – For defining global variables for scenarios
- **BC-SEC-AUT:**
  - [2449051](https://me.sap.com/notes/2449051) – Documentation of SACF scenarios

### CVSS
- **CVSS Score:** 0
- **Vector:** Not Applicable

### Side Effects
- **Solves Side Effects:** None reported.
- **Causing Side Effects:** None reported.

---

*Thanks to [Red Rays](https://redrays.io) for support in providing this information.*