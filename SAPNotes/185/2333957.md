2333957 - Clickjacking Framing Protection in SAP Fiori Launchpad for NW AS ABAP based on a list of allowed domains

**Symptom**

**UPDATE 9th March 2021**: This note has been re-released with updated 'Symptom' information. We made minor textual changes. There have not been any changes done which require customer action.

SAP Fiori Launchpad for SAP NetWeaver Application Server ABAP uses a restrictive protection against Clickjacking attacks that does not allow configuring a list of allowed domains (allowlist). This means the SAP Fiori launchpad HTML page cannot be embedded in any IFrame of a site from a different domain. This protection also covers all SAP Fiori applications running inside the SAP Fiori launchpad.

**Other Terms**

UI redressing attack, Clickjacking, Framing Protection, Framing, IFrame, UI Redressing, Clickjacking Allowlist, X-FRAME-OPTIONS, Fiori, Launchpad

**Reason and Prerequisites**

The SAP Fiori Launchpad has been delivered with its own protection mechanism against clickjacking. Since a standard mechanism for SAPUI5 applications is available, this mechanism is used if it is active.

**Solution**

The SAP Fiori Launchpad will automatically use the clickjacking protection mechanism for SAPUI5 applications if it is activated. See [SAP Note 2245332](https://me.sap.com/notes/2245332) for prerequisites, installation, and configuration procedures.

The behavior of the clickjacking mechanism changes as follows:

1. It is possible to configure domains which are allowed to embed the SAP Fiori Launchpad HTML page in an allowlist. Refer to [SAP Note 2142551](https://me.sap.com/notes/2142551) for details.
2. If access of the framing page is denied, the SAP Fiori Launchpad will be displayed, but no user interaction is possible (the previous implementation just renders a white page in that case).
3. The check whether the framing page is allowed is realized via a post message protocol; the standard UI5 implementation requires an additional confirmation call. Therefore, it might be necessary to implement the standard clickjacking protection mechanism on the embedding component (e.g., an SAP Enterprise Portal) as well.

**CVSS Score**

- **Score:** 4.3
- **Vector:** [CVSS:3.0/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N](https://www.first.org/cvss/calculator/3.0#CVSS:3.0/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N)

**Additional References**

- [SAP Note 2319727](https://me.sap.com/notes/2319727): Clickjacking protection framework in SAP NetWeaver AS ABAP and AS Java
- [SAP Note 2319184](https://me.sap.com/notes/2319184): Whitelist based Clickjacking Framing Protection in SAPUI5
- [SAP Note 2057847](https://me.sap.com/notes/2057847): Removing/Relaxing Click-Jacking Protection for the SAP Fiori Launchpad

For more details and to download the note, visit the [Download for SNOTE](https://notesdownloads.sap.com/note/0040000018353282017) page or access the [PDF Version](https://userapps.support.sap.com/sap/support/sfm/notes/print/0002333957?language=en-US&token=FC6FD6FADB49CCFD860F544BABAFB461).

*Credits to [RedRays](https://redrays.io) for support in providing this information.*