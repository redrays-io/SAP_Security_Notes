2245332 - Automatic usage of Whitelist Service for Clickjacking Framing Protection in SAPUI5 Apps

# SAP Security Note 2245332

**Type:** SAP Security Note  
**Version:** 1  
**Recency:** New  
**Language:** English  
**Category:** Program error  
**Priority:** Correction with medium priority  
**Status:** Released for Customer  
**Released On:** 12.07.2016  
**Component:** ABAP (see [SAP Note 2549631](https://me.sap.com/notes/2549631))

## Description

### Symptom

You can use the whitelist service for clickjacking framing protection described in [SAP Note 2319727](https://me.sap.com/notes/2319727) to define rules for protecting web applications hosted on an SAP NetWeaver ABAP system against clickjacking attacks.

If you have configured the whitelist service, you expect that any SAPUI5 app hosted on an ABAP system is automatically protected against clickjacking attacks. This, however, is not the case.

### Other Terms

UI redressing attack, Clickjacking, Framing Protection, Framing, IFrame, UI Redressing, Clickjacking Whitelist, X-FRAME-OPTIONS, SAPUI5

## Reason and Prerequisites

You can use the clickjacking framing protection feature in addition to or as a replacement for the existing option for setting the X-Frame-Options HTTP response header of SAPUI5 apps via BADI `/UI5/BADI_CONFIG_HTTP_HANDLER` described in [SAP Note 2075016](https://me.sap.com/notes/2075016). The clickjacking framing protection feature provides more flexibility regarding the hosts that are allowed to embed a protected app in an iFrame. Bear in mind that the protection provided by this SAP Note is automatically activated for all SAPUI5 apps on the system and that you donâ€™t have to modify them.

## Solution

Implement this note and ensure that the following prerequisites are met:

- **Whitelist Service:** Implement and configure the whitelist service for clickjacking framing protection (see [SAP Note 2319727](https://me.sap.com/notes/2319727)).

- **SAPUI5 Core Libraries:** Use one of the following versions of the SAPUI5 core libraries:
  - **1.28.22** ([SAP Note 2249111](https://me.sap.com/notes/2249111))
  - **1.32.7** ([SAP Note 2248688](https://me.sap.com/notes/2248688))
  - **1.34.x or above**

If you want to use the whitelist service for clickjacking framing protection and have also implemented method `/UI5/IF_CNFG_HTTP_HNDLR~RESTRICT_IFRAME_USE` of the BAdI `UI5/BADI_CONFIG_HTTP_HANDLER` for restricting iFrame use in general, make sure that both the whitelist service and the BAdI method are aligned. Otherwise, whitelist entries that allow operation of an SAPUI5 app in an iFrame on a specific server may not work as expected. Also, consider removing the implementation of the BAdI method.

## References

### This document refers to:
- [2319727: Clickjacking protection framework in SAP Netweaver AS ABAP and AS Java](https://me.sap.com/notes/2319727)
- [2319184: Whitelist based Clickjacking Framing Protection in SAPUI5](https://me.sap.com/notes/2319184)
- [2249111: SAPUI5 upgrade to version 1.28.22](https://me.sap.com/notes/2249111)
- [2248688: SAPUI5 upgrade to version 1.32.7](https://me.sap.com/notes/2248688)
- [2142551: Whitelist service for Clickjacking Framing Protection in AS ABAP](https://me.sap.com/notes/2142551)
- [2075016: SAPUI5 Applications: No need to clear the Browser Cache manually and Customizing of HTTP Response Headers](https://me.sap.com/notes/2075016)

### This document is referenced by:
- [2420897: Cannot click tiles on Fiori Launchpad when the Fiori iview is used on Portal due to red unavailable cursor](https://me.sap.com/notes/2420897)

## Download Links

- [Download for SNOTE](https://notesdownloads.sap.com/note/0040000013271262017)
- [PDF Version](https://userapps.support.sap.com/sap/support/sfm/notes/print/0002245332?language=en-US&token=90DAE0395938043F64185B7ECFFE141F)

## Validity

**Software Components:**
- UI_INFRA 100
- SAP_UI 740
- SAP_UI 750
- UI_700 200

## Support Packages

- [UI_INFRA 100: SAPK-10015INUIINFRA](https://me.sap.com/supportpackage/SAPK-10015INUIINFRA)
- [UI_700 200: SAPK-20002INUI700](https://me.sap.com/supportpackage/SAPK-20002INUI700)
- [SAP_UI 740: SAPK-74015INSAPUI](https://me.sap.com/supportpackage/SAPK-74015INSAPUI)
- [SAP_UI 750: SAPK-75002INSAPUI](https://me.sap.com/supportpackage/SAPK-75002INSAPUI)

## Correction Instructions

- **UI_INFRA:** [Correction Instructions 13992](https://me.sap.com/corrins/0002245332/13992)
- **UI_700:** [Correction Instructions 19846](https://me.sap.com/corrins/0002245332/19846)

## CVSS

**CVSS Score:** 0  
**CVSS Vector:** N/A

## Side Effects

This document does not cause side effects.

---

*Credits to [redrays.io](https://redrays.io) for supporting the provision of this information.*