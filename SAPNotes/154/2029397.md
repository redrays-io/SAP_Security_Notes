2029397 - Missing authorization checks for RFC in E-commerce ERP applications

### Symptom
This SAP note describes information related to new authorization checks added to RFC function modules used in E-commerce applications with ERP scenarios.

### Reason and Prerequisites
Remote calls to RFC function modules are protected by checks on the authorization object `S_RFC`. Authorizations for `S_RFC` must be limited to the required minimum authorizations for all users to ensure system security. Many RFC function modules can be sufficiently protected using `S_RFC` authorization checks. These RFC function modules often do not perform additional functional authorization checks. Please see [SAP Note 2008727](https://me.sap.com/notes/2008727) for further information on RFC Security.

It was identified that `S_RFC` authorization checks might not be sufficient to ensure secure execution for RFC function modules covered by this SAP Note.

### Solution
The following new functional authorization objects have been added to the function modules below:

1. **ISA_CUSTOMER_GETSALESAREAS** - Create List of Sales Areas for the Customer via RFC  
   Access to customer's sales area data with authority checks on objects `F_KNA1_GEN` and `V_KNA1_VKO`.
2. **ISA_CUSTOMER_SALES_READ** - Read from sales area data for customers via RFC  
   Similar authority checks as above.
3. **ISA_FIND_CUSTOMER_PROCEDURE** - Read the customer schema via RFC  
   No longer supported; coding is commented out.
4. **ISA_FIND_PRICING_PROCEDURE** - Determine the pricing procedure via RFC  
   Authority checks on `F_KNA1_GEN` and `V_KNA1_VKO`.
5. **ISA_GET_CATALOG_LIST** - Read Catalog List and language via RFC  
   Authority check on `ISA_AUCT`.
6. **ISA_GET_PRODCAT_ITEMS_BY_MATNR** - Read product Catalog and material data via RFC  
   No longer supported; coding is commented out.
7. **ISA_GET_VARIANT_LIST** - Reads product catalog variants based on language  
   Authority check on `ISA_AUCT`.
8. **ISA_INTERNET_USER** - Used for SU05 user creation/change via RFC  
   Authority checks on `F_KNA1_GEN`, `S_USER_GRP`.
9. **ISA_READ_CONTACT_IDENTIFIER** - Read identifier of contact person via RFC  
   Authority check on `ISA_LRD`.  
   **IMPORTANT**: View the manual implementation steps attached to the correction instructions for release 604 and higher.
10. **ISA_READ_CUSTOMER_IDENTIFIER** - Read identifier of customer via RFC  
    Authority check on `ISA_LRD`.  
    **IMPORTANT**: View the post implementation steps attached to the correction instructions for release 604 and higher.
11. **ISA_SHIPTOS_OF_SOLDTO_GET** - Goods Recipient for Client via RFC  
    Authority checks on `V_KNA1_VKO` and `F_KNA1_GEN`.
12. **ISA_USER_GET_FROM_CUSTOMER** - Read user attached to customer via RFC  
    Authority check on `F_KNA1_GEN`.
13. **IST_GET_CHARACTERISTICS** - Read product Catalog data per customer via RFC  
    No longer supported; coding is commented out.
14. **IST_SET_CHARACTERISTICS** - Sets the product Catalog data per customer via RFC  
    No longer supported; coding is commented out.
15. **IST_CLEAR_CHARACTERISTICS** - Deletes the product Catalog data per customer via RFC  
    No longer supported; coding is commented out.
16. **ADV_MED_READ_RFC** - Reads product catalog data via RFC  
    Authority check on `W_PCAT_MTN`.
17. **ADV_MED_VARIANTS_READ** - Reads product catalog variant data via RFC  
    Authority check on `W_PCAT_MTN`.

#### Manual Activities
You need to perform the following steps manually as they cannot be applied using the Note Assistant (Transaction SNOTE):

1. **Create a new Authorization Object: `ISA_LRD`**
   - Go to transaction SE80.
   - Open Package ISA_R3.
   - Navigate to "Authorization Objects" and create a new one with the specified details.
   - Add the field `ACTVT` to the authorization fields.
   - Save and activate the authorization object.

2. **Documentation for `ISA_LRD`**
   - In edit mode, create object documentation by copying the content from `Documentation_ISA_LRD.txt`.
   - Save and activate the documentation.

3. **Create Role: `SAP_ISA_LRD_AUTH`**
   - Go to transaction PFCG.
   - Create a new single role named `SAP_ISA_LRD_AUTH` with the description "E-commerce Lean order API authorization role".
   - Add the authorization object `ISA_LRD` with activity `03 "Display"`.
   - Save the role without generating a profile for standard SAP roles.

4. **Assign the Role**
   - Assign `SAP_ISA_LRD_AUTH` to authorized users in transactions SU01/PFCG.

### Validity
Applicable to SAP_APPL component versions 600 to 617.

### Support Package
Multiple support packages are available for different versions. Refer to [Support Packages](https://me.sap.com/supportpackage/SAPKH60417) for more details.

### Correction Instructions
Follow the correction instructions available [here](https://me.sap.com/corrins/0002029397/1).

### Side Effects
This document is causing side effects related to:
- [SAP Note 2222068 - Incorrect authorization check](https://me.sap.com/notes/0002222068)
- [SAP Note 2146487 - Internal Error :SAPLWWMM LWWMMF02 451 => call hotline](https://me.sap.com/notes/0002146487)

**Credits:** Thanks to [Redrays](https://redrays.io) for supporting the provision of this information.