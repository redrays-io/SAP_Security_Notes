2877226 - Switchable Authorization checks in SAP Supplier Relationship Management

**SAP Security Note 2877226: Switchable Authorization Checks in SAP SRM**

*Released on:* March 12, 2020  
*Priority:* Correction with medium priority  
*Component:* SRM-EBP-INT (Supplier Relationship Management > SRM > Plug-In Interfaces)  
*Version:* 4

### Symptom
S_RFC authorization checks are insufficient for secure execution of RFC function modules covered by this note. New switchable authorization checks have been implemented for RFC function modules in SAP Supplier Relationship Management (SRM).

### Reason and Prerequisites
Remote calls to RFC function modules are protected by S_RFC authorization checks, which should not be deactivated. This note introduces new switchable authorization checks to enhance security. Ensure that authorization for S_RFC is limited to the minimum required to maintain system security. Refer to SAP Note 2216306 for recommended settings of profile parameter `auth/rfc_authority_check` and the white paper "Securing Remote Function Calls (RFC)" attached to SAP Note 2008727 for more information.

### Solution
Activate the new switchable authorization checks via transaction **SACF**. The checks are inactive by default to ensure compatibility and can be enabled as needed. Follow these high-level steps:

#### Implementation Steps:
1. **Create Authorization Scenario Definition:**
   - Use transaction **SACF**.
   - If scenario `BBP_PUR_REQ` doesn't exist, download the attached [`BBP_PUR_REQ.TXT`](https://me.sap.com/sap/support/sapnotes/public/services/attachment.htm?iv_key=002075125900002737462019&iv_version=0004&iv_guid=00109B36BC8E1EDA8AE0EB01686B80E2) file.
   - Use transaction **SACF_TRANSFER** to upload the scenario definition.
   - Assign it to the development package **BBPA**.

2. **Create Productive Authorization Scenario:**
   - In **SACF**, select the scenario definition and set it to "Active" or "Logging".
   - Use report **RSAU_SELECT_EVENTS** to identify users requiring authorizations.

3. **(Optional) Activate Logging of SACF Relevant Audit Messages:**
   - Ensure Security Audit Log is active via transaction **SM19**.
   - Activate message IDs DUO, DUP, and DUQ in the Security Audit Log configuration.

4. **Adjust Roles:**
   - Update roles to include the necessary authorizations based on the authorization scenario.

Additional support packages and patches are available for various software components and versions. Refer to the [Support Package](https://me.sap.com/supportpackage/SAPK-10010INS4CORE) section in the note for detailed information.

### CVSS Score
**6.3**  
*Vector:* CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:L/A:L

### References
- [Download for SNOTE](https://notesdownloads.sap.com/note/0040000000401652020)
- [PDF Version](https://me.sap.com/sap/support/sfm/notes/print/0002877226?language=en-US&token=1D53012010727B1E3DD89415069F5681)

### Affected Software Components
- **SAP_APPL** (Releases 600 to 618)
- **S4CORE** (Releases 100 to 104)

### Side Effects
- This note may cause side effects as referenced by [SAP Note 2925111](https://me.sap.com/notes/2925111) regarding wrong status updates in SRM after applying this note.

For detailed information, visit the [SAP Security Note 2877226](https://me.sap.com/notes/2877226).

*Credits to [redrays.io](https://redrays.io) for supporting the provision of this information.*