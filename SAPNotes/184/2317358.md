2317358 - Missing Authorization check in SAP Yard Logistics

## SAP Security Note 2317358: Missing Authorization Check in SAP Yard Logistics

**Type:** SAP Security Note  
**Version:** 1  
**Recency:** New  
**Language:** English  
**Category:** Program error  
**Priority:** Correction with medium priority  
**Status:** Released for Customer  
**Released On:** August 5, 2016  
**Component:** Supply Chain Management > SAP Yard Logistics  
**Support Package:** [SAPK-10002INSAPYL](https://me.sap.com/supportpackage/SAPK-10002INSAPYL)  

### Symptom

Function Modules `/SAPYL/SET_YT_STATUS_ASYNC`, `/SAPYL/WS_DOOR_ARR_DEP`, `/SAPYL/WS_LOAD_UNLOAD_NOTIF`, and `/SAPYL/WS_QUERY_EXTERNAL_TU` do not perform necessary authorization checks for authenticated users, resulting in escalation of privileges.

**Impacts of Missing Authorization Checks:**
- Abuse of functionality restricted to specific user groups.
- Unauthorized read, modify, or delete of restricted data.

### Reason and Prerequisites

Missing authorization checks in RFC Function Modules. This issue exclusively affects SAP Yard Logistics.

### Solution

An additional authorization object `/SAPYL/SLF` (SAP Yard Logistics Special Logistics Functions) has been introduced. This object is now checked at the RFC level, requiring the yard number and the specific logistical function as parameters.

**Implemented Checks:**
- **Web Service Call for EWM Door Arrival and Departure:**
  - **Door Arrival:** Requires authorization for the yard number and door arrival (fixed value AR).
  - **Door Departure:** Requires authorization for the yard number and door departure (fixed value DP).

- **Web Service Call for EWM Loading and Unloading Notification:**
  - Requires authorization for the yard number and loading/unloading notification call (fixed value NF).

- **Web Service Call for EWM Query for a Specific TU:**
  - Requires authorization for the yard number and the TU query call (fixed value Q1).

Implement the attached [correction instructions](https://me.sap.com/corrins/0002317358/19635).

### Correction Instructions

Follow the [Correction Instructions 19635](https://me.sap.com/corrins/0002317358/19635) to apply the necessary changes.

### Download

- **Download for SNOTE:** [https://notesdownloads.sap.com/note/0040000013684552017](https://notesdownloads.sap.com/note/0040000013684552017)
- **PDF Version:** [https://me.sap.com/sap/support/sfm/notes/print/0002317358?language=en-US&token=BC06D4360A97DB9E2C2188E126571944](https://me.sap.com/sap/support/sfm/notes/print/0002317358?language=en-US&token=BC06D4360A97DB9E2C2188E126571944)

### Manual Pre-Implementation Steps

**Caution:** Perform these manual pre-implementation steps separately in each system **before** importing the Note to implement.

1. **Transaction SE91:**
   - Set Message class to `/SAPYL/YARD_TU` and press 'Change'.
   - Add the following messages:
     - **209:** "You do not have authorization for operating with TUs in Yard &1"
     - **210:** "Only one Yard is supported in selection parameters in RFC FM &1"
   - Press 'Save' and then 'Back'.

2. **Transaction SE91:**
   - Set Message class to `/SAPYL/YARD_TASK` and press 'Change'.
   - Add the following message:
     - **303:** "You do not have authorization for activation Yard Task in Yard &1"
   - Press 'Save' and then 'Back'.

---

*Credits to [RedRays](https://redrays.io) for support in providing this information.*