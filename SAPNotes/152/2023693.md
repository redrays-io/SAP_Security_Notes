SAP Security Note 2023693: Switchable Authorization Checks for RFC in SD

**Overview**
This SAP Security Note introduces new switchable authorization checks for RFC function modules in the Sales and Distribution (SD) module. The implementation enhances system security by ensuring that remote function calls (RFCs) are protected with appropriate authorization objects.

**Details**
- **Note Number:** 2023693
- **Type:** SAP Security Note
- **Title:** Switchable authorization checks for RFC in SD
- **Release Status:** Released for Customer
- **Released On:** 11.11.2014
- **Component:** Sales and Distribution > Billing (SD-BIL)
- **Priority:** Correction with medium priority
- **Recency:** New
- **Language:** English

**Symptom**
Remote calls to RFC function modules in SD are currently protected by checks on the authorization object `S_RFC`. However, these checks may not be sufficient to ensure secure execution, as many RFC function modules do not perform additional functional authorization checks.

**Solution**
The SAP Note outlines the implementation of new switchable authorization checks that are initially inactive to ensure compatibility with existing processes. These checks can be activated via transaction `SACF`. The implementation involves the following steps:

1. **Create the Authorization Scenario Definition**
   - Use transaction `SACF` to verify if the scenario definition (e.g., `SD_RFC_CUST`) exists.
   - If not, download the corresponding `.TXT` file from the SAP Note attachments.
   - Upload the file using transaction `SACF_TRANSFER` and assign it to the appropriate development package.

2. **Activate the Productive Authorization Scenario**
   - In transaction `SACF`, select the scenario definition and transfer it to a productive scenario.
   - Choose the initial status as "Active" or "Logging":
     - **Active:** Activates both the authorization check and logging to the Security Audit Log.
     - **Logging:** Activates logging only, allowing authorization checks to pass temporarily for identifying required authorizations.

3. **Configure Security Audit Log**
   - Ensure that the Security Audit Log is activated via transaction `SM19`.
   - Create and activate a new filter to capture relevant audit messages:
     - Non-Critical: Successful and failed authorization checks (`DUO`, `DUP`).
     - Critical: Changes to the active scenario (`DUQ`).

4. **Adjust User Roles**
   - Use report `RSAU_SELECT_EVENTS` to identify users needing additional authorizations.
   - Update roles accordingly to comply with the new authorization scenarios.

**Affected RFC Function Modules**
- `SD_RFC_CUSTOMER_GET`
- `BAPI_BILLINGDOC_GETLIST`
- `BAPI_BILLINGDOC_GETDETAIL`

**Preconditions**
Ensure the following SAP Notes are applied:
- [SAP Note 1794620](https://me.sap.com/notes/1794620) - Check for transaction authorization
- [SAP Note 1995667](https://me.sap.com/notes/1995667) - SACF: Navigation error
- [SAP Note 2051936](https://me.sap.com/notes/2051936) - SACF_TRANSFER | Download only takes logon language into account

**Support Packages**
Applicable to SAP_APPL releases 600, 602, 603, 604, 605, 606, 616, and 617. Specific support packages can be found [here](https://me.sap.com/supportpackage/SAPKH60026).

**Attachments**
- [SD_BIL_GET_DETAIL.TXT](https://me.sap.com/sap/support/sapnotes/public/services/attachment.htm?iv_key=012003146900000739792014&iv_version=0001&iv_guid=D5C7107AE167F543AB2813BF60F57247)
- [SD_BIL_GET_LIST.TXT](https://me.sap.com/sap/support/sapnotes/public/services/attachment.htm?iv_key=012003146900000739792014&iv_version=0001&iv_guid=E16F65F7FE5775489F3412F4981B9E12)
- [SD_RFC_CUST.TXT](https://me.sap.com/sap/support/sapnotes/public/services/attachment.htm?iv_key=012003146900000739792014&iv_version=0001&iv_guid=EFC74EC06AF2584A9C34DF510B72DF40)

**References**
- [SAP Note 2078596](https://me.sap.com/notes/2078596) - Further improvements for RFC security

For more detailed instructions and support, refer to the full SAP Note [2023693](https://me.sap.com/notes/2023693).

*Credits to [RedRays](https://redrays.io) for supporting the provision of this information.*