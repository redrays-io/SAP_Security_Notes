SAP Security Note 2023335 - Switchable authorization checks for RFC in CA-JVA

**SAP Note Number**: 2023335  
**Title**: Switchable authorization checks for RFC in CA-JVA  
**Type**: SAP Security Note  
**Priority**: Correction with medium priority  
**Status**: Released for Customer  
**Released On**: 11.11.2014  
**Component**: Cross-Application Components > Joint Venture and Production Sharing Accounting

### Description

This SAP Note introduces new switchable authorization checks for RFC function modules in the CA-JVA component. Remote calls to RFC function modules are secured using the S_RFC authorization object. However, it was identified that S_RFC checks might not be sufficient for certain RFC function modules, potentially compromising system security. This note provides instructions to activate enhanced authorization checks to ensure secure execution.

### Affected RFC Function Modules

- BAPI_JOAEQUITYGROUP_CHANGE
- BAPI_JOAEQUITYGROUP_CREATE
- BAPI_JOAEQUITYGROUP_DELETE
- BAPI_JOAEQUITYGROUP_GETDETAIL
- BAPI_JOAEQUITYGROUP_GETLIST
- BAPI_JOA_CHANGE
- BAPI_JOA_CREATE
- BAPI_JOA_DELETE
- BAPI_JOA_GETDETAIL
- BAPI_JOA_GETLIST
- BAPI_VENTURE_CREATE

### Solution

New switchable authorization checks have been implemented and are delivered inactive by default to maintain compatibility. To enhance security, follow these steps to activate the authorization checks:

1. **Create the Authorization Scenario Definition**:
   - Start transaction `SACF` in the development system.
   - Verify if the scenario definition `JV_RFC` exists.
   - If not, download the [JV_RFC.txt](https://me.sap.com/notes/0002023335/JV_RFC.txt) attachment.
   - Use transaction `SACF_TRANSFER` to upload the scenario definition.
   - Assign `JV_RFC` to the development package `GJVA`.

2. **Create the Productive Authorization Scenario**:
   - In transaction `SACF`, select `Scenario Definition` and execute `JV_RFC`.
   - Transfer the scenario definition to a productive scenario by clicking the `Scenario` button or pressing F5.
   - Choose the status:
     - **Active**: Activates authorization checks and logs to the Security Audit Log.
     - **Logging**: Activates logging without enforcing authorization checks, useful for identifying required authorizations.

3. **Activate Logging in the Security Audit Log**:
   - Ensure Security Audit Log is activated via transaction `SM19`.
   - Create a new filter to log relevant audit messages:
     - **Non-Critical**: DUO, DUP
     - **Critical**: DUQ
   - Activate the new filter.

4. **Adjust Roles for New Authorizations**:
   - Use report `RSAU_SELECT_EVENTS` to identify users needing additional authorizations.
   - Analyze authorization checks using transactions `STAUTHTRACE` or `ST01`.

### Prerequisites

- Applicable to SAP components EA-APPL (versions 600 to 616) and EA-FIN (versions 617 to 700).
- Ensure compatibility with existing support packages as listed in the Support Package section below.

### References

- **SAP Note 2008727**: Further information on RFC Security.
- **SAP Note 2078596**: Further improvements for RFC security.

### Attachments

- [JV_RFC.txt](https://me.sap.com/notes/0002023335/JV_RFC.txt) (549 KB)

### Support Package Information

Ensure your system is updated with the relevant support packages:
- **EA-APPL**: SAPKGPAD26, SAPK-60216INEAAPPL, SAPK-60315INEAAPPL, etc.
- **EA-FIN**: SAPK-61706INEAFIN, SAPK-70003INEAFIN
- Detailed support package URLs can be found [here](https://me.sap.com/supportpackage/SAPK-XXXXXX).

### CVSS Score

- **Score**: 0

### Side Effects

This document does not introduce any known side effects.

---

*Credits to [RedRays.io](https://redrays.io) for support in providing this information.*