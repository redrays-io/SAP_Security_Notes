2266687 - Switchable authorization checks for RFC in CRM Counters

**SAP Note/KBA:** 2266687  
**Type:** SAP Security Note  
**Version:** 1  
**Recency:** New  
**Language:** English  
**Category:** Program error  
**Priority:** Correction with medium priority  
**Status:** Released for Customer  
**Released On:** 11.10.2016  
**Component:** CRM-BF (Basic Functions)  
**Title:** Switchable authorization checks for RFC in CRM Counters

### Description

#### Symptom
This SAP note describes new switchable authorization checks for RFC function modules in CRM Counters.

#### Other Terms
SACF, RFC, authorization, Counter, CRM, Create, Modify

#### Reason and Prerequisites
Remote calls to RFC function modules are protected by checks on the authorization object `S_RFC`. Authorizations for `S_RFC` must be limited to the required minimum authorizations for all users to ensure system security. Many RFC function modules can be sufficiently protected using `S_RFC` authorization checks without additional functional authorization checks. Refer to SAP Note [2008727](https://me.sap.com/notes/2008727) for more information on RFC Security.

It was identified that `S_RFC` authorization checks might not be sufficient to ensure secure execution for RFC function modules covered by this note. Activate new switchable authorization checks and update corresponding roles if these RFC function modules are included in `S_RFC` authorizations in your system.

#### Solution
New switchable authorization checks have been implemented. The checks are delivered inactive to ensure compatibility with your running processes. They can be activated in transaction SACF as described in the attached manual correction instructions. See SAP Note [1922808](https://me.sap.com/notes/1922808) for additional information on the switchable authorization check framework (SACF).

**New Authorization Scenario(s):**
- **Scenario 1:** `CRM_MPK_RFC_1` - Authorization Check for CRM Measuring Point (1)

**Affected Business Processes and Roles:**
- Remote creation and modification of CRM Counters and readings.

**Affected RFC Function Modules:**
| Scenario       | Function Module                  | Auth. Object | Param1 | Param2 | Param3 |
|----------------|----------------------------------|--------------|--------|--------|--------|
| CRM_MPK_RFC_1  | CRM_COUNTER_MD_LIST_BY_OBJECT    | CRM_MPOINT   | ACTVT=45 |        |        |
| CRM_MPK_RFC_1  | CRM_COUNTER_MD_RFC_CREATE_REF     | CRM_MPOINT   | ACTVT=45 |        |        |
| CRM_MPK_RFC_1  | CRM_MPK_RFC_MPOINT_UPDATE         | CRM_MPOINT   | ACTVT=45 |        |        |
| CRM_MPK_RFC_1  | CRM_MPK_RFC_MPOINT_GETDETAIL      | CRM_MPOINT   | ACTVT=45 |        |        |
| CRM_MPK_RFC_1  | CRM_MPK_RFC_MPOINT_GETLIST        | CRM_MPOINT   | ACTVT=45 |        |        |

**Implementation of the Switchable Authorization Check:**
The switchable authorization scenario and checks are provided via support package and can be technically pre-implemented using the provided correction instructions. After implementation, the checks remain inactive until manually activated.

**Activation Steps:**
1. **Create the Authorization Scenario Definition:**
   - Start transaction SACF in the development system and verify if `CRM_MPK_RFC_1` exists.
   - If not, download the `CRM_MPK_RFC_1.txt` file attached to this note.
   - Use transaction [SACF_TRANSFER](https://me.sap.com/transactions/SACF_TRANSFER) to upload the scenario definition.
   - Assign the scenario to the development package `CRM_MPK_COMM`.

2. **Create and Activate the Productive Authorization Scenario:**
   - Follow SAP Note [1922808](https://me.sap.com/notes/1922808) for detailed instructions on ensuring authorized users have the required authorizations and activating the checks.

**Manual Post-Implement Activities:**
- **Create Authorization Object `CRM_MPOINT` in transaction SU21 if it does not exist:**
  - Object: `CRM_MPOINT`
  - Text: Authorization Object for Measuring Point
  - Class: CRM
  - Package: `CRM_MPK_COMM`
  - Authorization Fields: `ACTVT` (Activity) with permitted activity `45` (Allow)
- **Regenerate `SAP_ALL` in transaction SU21.**

### Actions
- [Download for SNOTE](https://notesdownloads.sap.com/note/0040000013833502017)
- [PDF Version](https://userapps.support.sap.com/sap/support/sfm/notes/print/0002266687?language=en-US&token=C3406C460A09393BDAD24B33E9E87E83)
- [Share by Email](https://me.sap.com/notes/0002266687/share)
- [Open in New Window](https://me.sap.com/notes/0002266687)

### Attachments
- [CRM_MPK_RFC_1.TXT](https://userapps.support.sap.com/sap/support/sapnotes/public/services/attachment.htm?iv_key=012006153200000106572016&iv_version=0001&iv_guid=6CAE8B27FE531ED683B841DCC526FEC7) (453 bytes, text/plain)

### Support Package Information
| Software Component Version | Support Package | URL |
|----------------------------|-----------------|-----|
| BBPCRM 700                 | SAPKU70018      | [SAPKU70018](https://me.sap.com/supportpackage/SAPKU70018) |
| BBPCRM 701                 | SAPKU70115      | [SAPKU70115](https://me.sap.com/supportpackage/SAPKU70115) |
| BBPCRM 702                 | SAPKU70217      | [SAPKU70217](https://me.sap.com/supportpackage/SAPKU70217) |
| BBPCRM 712                 | SAPKU71210      | [SAPKU71210](https://me.sap.com/supportpackage/SAPKU71210) |
| BBPCRM 713                 | SAPKU71312      | [SAPKU71312](https://me.sap.com/supportpackage/SAPKU71312) |
| BBPCRM 714                 | SAPK-71402INBBPCRM | [SAPK-71402INBBPCRM](https://me.sap.com/supportpackage/SAPK-71402INBBPCRM) |

### Correction Instructions
- **Number of Correction Instructions:** 5  
- **URL:** [Correction Instructions](https://me.sap.com/corrins/0002266687/63)

### Prerequisites
| Software Component | Valid From | Valid To | SAP Note/KBA | URL | Title | Component |
|--------------------|------------|----------|--------------|-----|-------|-----------|
| BBPCRM             | 700        | 700      | 2236076      | [2236076](https://me.sap.com/notes/2236076) | Architectural change to avoid syntax errors when calling CL_RFC=>CHECK_EXTERNAL and CL_SACF=>AUTH_CHECK_SPEC | CRM-BTX |
| BBPCRM             | 700        | 700      | 2242202      | [2242202](https://me.sap.com/notes/2242202) | Architectural change to avoid syntax errors when calling CL_RFC=>CHECK_EXTERNAL and CL_RFC=>CHECK_EXTERNAL_DIRECT | CRM-BTX |
| BBPCRM             | 700        | 700      | 2266687      | [2266687](https://me.sap.com/notes/2266687) | Switchable authorization checks for RFC in CRM Counters | CRM-BF |
| BBPCRM             | 701        | 701      | 2236076      | [2236076](https://me.sap.com/notes/2236076) | Architectural change to avoid syntax errors when calling CL_RFC=>CHECK_EXTERNAL and CL_SACF=>AUTH_CHECK_SPEC | CRM-BTX |
| BBPCRM             | 701        | 701      | 2242202      | [2242202](https://me.sap.com/notes/2242202) | Architectural change to avoid syntax errors when calling CL_RFC=>CHECK_EXTERNAL and CL_RFC=>CHECK_EXTERNAL_DIRECT | CRM-BTX |
| BBPCRM             | 701        | 701      | 2266687      | [2266687](https://me.sap.com/notes/2266687) | Switchable authorization checks for RFC in CRM Counters | CRM-BF |
| BBPCRM             | 702        | 702      | 2236076      | [2236076](https://me.sap.com/notes/2236076) | Architectural change to avoid syntax errors when calling CL_RFC=>CHECK_EXTERNAL and CL_SACF=>AUTH_CHECK_SPEC | CRM-BTX |
| BBPCRM             | 702        | 702      | 2266687      | [2266687](https://me.sap.com/notes/2266687) | Switchable authorization checks for RFC in CRM Counters | CRM-BF |
| BBPCRM             | 713        | 713      | 2236076      | [2236076](https://me.sap.com/notes/2236076) | Architectural change to avoid syntax errors when calling CL_RFC=>CHECK_EXTERNAL and CL_SACF=>AUTH_CHECK_SPEC | CRM-BTX |
| BBPCRM             | 713        | 713      | 2242202      | [2242202](https://me.sap.com/notes/2242202) | Architectural change to avoid syntax errors when calling CL_RFC=>CHECK_EXTERNAL and CL_RFC=>CHECK_EXTERNAL_DIRECT | CRM-BTX |
| BBPCRM             | 713        | 713      | 2266687      | [2266687](https://me.sap.com/notes/2266687) | Switchable authorization checks for RFC in CRM Counters | CRM-BF |
| BBPCRM             | 714        | 714      | 2266687      | [2266687](https://me.sap.com/notes/2266687) | Switchable authorization checks for RFC in CRM Counters | CRM-BF |

### CVSS
- **CVSS Score:** 0

### Rating
No ratings yet.

### Side Effects
This document does not solve or cause any side effects.

### Links
- [Download for SNOTE](https://notesdownloads.sap.com/note/0040000013833502017)
- [PDF Version](https://userapps.support.sap.com/sap/support/sfm/notes/print/0002266687?language=en-US&token=C3406C460A09393BDAD24B33E9E87E83)
- [Share by Email](https://me.sap.com/notes/0002266687/share)
- [Open in New Window](https://me.sap.com/notes/0002266687)

Credits to [Redrays.io](https://redrays.io) for support in providing this information.