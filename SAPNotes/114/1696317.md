1696317 - Unauthorized modification of displayed content in CRM-ANA-PS

## SAP Security Note 1696317: Unauthorized Modification of Displayed Content in CRM-ANA-PS

### **Symptom**
CRM-ANA-PS can be exploited by an attacker to modify displayed application content without authorization. This vulnerability may allow the attacker to obtain authentication information from other legitimate users.

### **Other Terms**
- Reflected Cross-Site Scripting (XSS)
- CRM-ANA-PS

### **Reason and Prerequisites**
PCUI Planning Layouts within CRM-ANA-PS do not sufficiently encode input parameters, resulting in a reflected cross-site scripting (XSS) vulnerability. An attacker can use this vulnerability to:
- Non-permanently deface or modify displayed content on the web application.
- Steal another user's authentication information, such as session data.
- Impersonate users, including administrators, potentially compromising the entire application's security.

### **Solution**
To resolve the Cross-Site Scripting issue, you can either apply the attached correction instructions or install the corresponding Support Package.

**Download for SNOTE:** [https://notesdownloads.sap.com/note/0040000000376572018](https://notesdownloads.sap.com/note/0040000000376572018)

**PDF Version:** [1696317 - Unauthorized modification of displayed content in CRM-ANA-PS](https://userapps.support.sap.com/sap/support/sfm/notes/print/0001696317?language=en-US&token=D552E9426A3610D96F4978836A8E437E)

### **Support Package Details**
- **BBPCRM 500:** [SAPKU50022](https://me.sap.com/supportpackage/SAPKU50022)
- **BBPCRM 510:** [SAPKU510XX](https://me.sap.com/supportpackage/SAPKU510XX)
- **BBPCRM 520:** [SAPKU52011](https://me.sap.com/supportpackage/SAPKU52011)
- **BBPCRM 600:** [SAPKU60013](https://me.sap.com/supportpackage/SAPKU60013)
- **BBPCRM 700:** [SAPKU70013](https://me.sap.com/supportpackage/SAPKU70013)
- **BBPCRM 701:** [SAPKU70110](https://me.sap.com/supportpackage/SAPKU70110)
- **BBPCRM 702:** [SAPKU70203](https://me.sap.com/supportpackage/SAPKU70203)
- **BBPCRM 712:** [SAPKU712XX](https://me.sap.com/supportpackage/SAPKU712XX)

### **Correction Instructions**
1. **Launch the Object Navigator**: Use transaction SE80.
2. **Maintain the BSP Application**:
   - Navigate to the Object Type BSP Application.
   - Enter the Object Name `CRM_KPI_FCAST` and press [Display].
3. **Change BSP Application Settings**:
   - In the Navigation Tree, select the BSP Application `CRM_KPI_FCAST`.
   - Choose [Change] from the Context Menu.
   - On the Properties tab, check the box **'XSRF Protection'**.
4. **Modify the Controller**:
   - Expand the 'Controller' folder in the Navigation Tree.
   - Select the Controller `main.do` and choose [Change] from the Context Menu.
   - Check the box **'Start BSP'** in the Controller's definition.
5. **Save and Activate Changes**: Ensure all modifications are saved and activated properly.

For detailed step-by-step instructions, refer to the **Correction Instructions** provided in the SAP Security Note.

### **Prerequisites**
- Ensure that your system is running one of the supported Software Component Versions listed above.
- Review related SAP Notes, such as [987003](https://me.sap.com/notes/987003), which addresses missing HTTP compression for the `CRM_KPI_FCAST` controller.

For more information and additional resources, visit [SAP Support](https://me.sap.com/).

Credits to [redrays.io](https://redrays.io) for support to provided information.