SAP Security Note 3136988 - [CVE-2021-44228] Remote Code Execution Vulnerability in Apache Log4j 2

**Overview**
- **SAP Note/KBA:** 3136988
- **Type:** SAP Security Note
- **Priority:** HotNews
- **Status:** Released for Customer
- **Released On:** January 11, 2022
- **Component:** SAP Leonardo Internet of Things > IoT Business Services > IoT on Hyperscalers > IoT on Microsoft Azure

**Title**
3136988 - [CVE-2021-44228] Remote Code Execution vulnerability associated with Apache Log4j 2 component used in Reference Template for enabling ingestion and persistence of time series data in Azure

**Description**
### Symptom
The [Reference template for enabling ingestion and persistence of time series data in Azure](https://github.com/SAP-samples/sap-iot-hyperscaler-azure-integration-ref/) uses a version of the open-source component Apache Log4j that contains vulnerabilities:
- [CVE-2021-44228](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-44228)
- [CVE-2021-45046](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-45046)
- [CVE-2021-45105](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-45105)
- [CVE-2021-44832](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-44832)

### Other Terms
Command Injection, OS command injection, Remote Code Execution, Log4j2

**Solution**
*Please upgrade the Apache Log4j Core dependency (org.apache.logging.log4j:log4j-core) to version **2.17.1** in your implementation. You can also pull the latest changes from the [sap-iot-hyperscaler-azure-integration-ref](https://github.com/SAP-samples/sap-iot-hyperscaler-azure-integration-ref) repository and refer to the [pom.xml](https://github.com/SAP-samples/sap-iot-hyperscaler-azure-integration-ref/blob/main/pom.xml) as an example.*

**CVSS Details**
- **Score:** 10.0
- **Vector:** CVSS:3.0/AV:N/AC:L/PR:L/UI:N/S:C/C:H/I:H/A:H
  - **Attack Vector (AV):** Network (N)
  - **Attack Complexity (AC):** Low (L)
  - **Privileges Required (PR):** Low (L)
  - **User Interaction (UI):** None (N)
  - **Scope (S):** Changed (C)
  - **Confidentiality Impact (C):** High (H)
  - **Integrity Impact (I):** High (H)
  - **Availability Impact (A):** High (H)

**Download and Print**
- [Download for SNOTE](https://notesdownloads.sap.com/note/0040000000020632022)
- [PDF Version](https://userapps.support.sap.com/sap/support/sfm/notes/print/0003136988?language=en-US&token=942F273F40B561551F23C6A8E9DB48E4)

**Attachments**
None.

**References**
This document does not reference or is not referenced by other SAP Notes or KBAs.

**Software Components Affected**
- **AZURE-IOT-INTEGRATION-REF:** Version 100

**Support**
For more information or support, visit [SAP Support](https://me.sap.com/).

---

*Credits to [RedRays.io](https://redrays.io) for supporting the provision of this information.*