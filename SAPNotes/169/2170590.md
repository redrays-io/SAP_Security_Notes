2170590 - Whitelist service for Clickjacking Framing Protection in AS JAVA

**SAP Note:** [2170590 - Whitelist service for Clickjacking Framing Protection in AS JAVA](https://me.sap.com/notes/2170590)

**Description**
AS JAVA UI technologies are vulnerable to Clickjacking attacks, where attackers trick users into clicking on unintended elements by overlaying malicious frames. This SAP Security Note provides a whitelist-based framework to protect against such attacks in NetWeaver environments.

**Symptom**
Without protection, AS JAVA applications do not safeguard against Clickjacking, allowing potential UI redressing attacks that exploit standard HTML features without needing code vulnerabilities.

**Reason and Prerequisites**
Clickjacking is an attack that manipulates the UI to deceive users into performing unintended actions. Traditional protection methods like the `X-FRAME-OPTIONS` header are inadequate for common NetWeaver integration scenarios, necessitating a specialized solution.

**Solution**
SAP introduces a whitelist-based framework tailored for NetWeaver technologies to mitigate Clickjacking risks. The implementation involves:

1. **Download the Note:**
   - [Download for SNOTE](https://notesdownloads.sap.com/note/0040000012872042017)
   - [PDF Version](https://userapps.support.sap.com/sap/support/sfm/notes/print/0002170590?language=en-US&token=6D38E0A466873EF393C93494E322AD95)

2. **Manual Activities:**
   
   - **For NW 7.0X:**
     1. Log in to the Visual Admin application via `\\usr\sap\<SID>\<System Number>\j2ee\admin`.
     2. Navigate to `Server XX_XXXX -> Services -> Configuration Adapter -> apps`.
     3. Locate the application `tc~lm~itsam~service~clickjacking` under `sap.com`.
     4. Edit `application.global.properties` and set the default configuration from `false` to `true`.
     5. Verify and apply changes across all server nodes.
     6. Restart the J2EE server to activate changes.
     7. Configure whitelist host entries through the NWA application under `Configuration -> Security -> ClickJacking Whitelist Configuration`.

   - **For NW 7.1X and Above:**
     1. Log in to the NWA application.
     2. Navigate to `Configuration -> Infrastructure -> Java System Properties`.
     3. In the `Application` tab, search for `tc~lm~itsam~service~clickjacking`.
     4. Modify the `ClickjackingProtectionService` property from `false` to `true`.
     5. Save the configuration and restart the J2EE engine.
     6. Configure whitelist host entries as mentioned above.

**References**
- [2319727 - Clickjacking protection framework in SAP Netweaver AS ABAP and AS Java](https://me.sap.com/notes/2319727)
- [2290783 - Whitelist based Clickjacking Framing Protection for Java Server Pages](https://me.sap.com/notes/2290783)
- [2286679 - Whitelist Service API required for the Clickjacking Framing Protection in JAVA at the framework or application level](https://me.sap.com/notes/2286679)
- [2263656 - Whitelist based Clickjacking Framing Protection in HTMLB Java](https://me.sap.com/notes/2263656)
- [2244161 - Clickjacking Protection in Web Channel Experience Management (WCEM)](https://me.sap.com/notes/2244161)
- [2169860 - Whitelist based Clickjacking Framing Protection in Web Dynpro Java](https://me.sap.com/notes/2169860)
- [2169722 - Whitelist based Clickjacking Framing Protection in Enterprise Portal](https://me.sap.com/notes/2169722)

**Valid For**
- **Software Components:**
  - LM-TOOLS: 7.00 to 7.02
  - LMNWAUIFRMRK: 7.10 to 7.50
  - LMNWABASICMBEAN: 7.10 to 7.50

**Support Package Patches**
Refer to the [Support Package Patches](https://me.sap.com/notes/2170590#SupportPackagePatch) section in the note for specific patch details and URLs.

**Credits**
Credits to [redrays.io](https://redrays.io) for support in providing this information.