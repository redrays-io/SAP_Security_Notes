2233831 - Switchable authorization checks for RFC in Leasing / Account Origination

**Description**

This SAP note introduces new switchable authorization checks for RFC function modules in Leasing and Account Origination within the CRM component. Remote calls to RFC function modules are secured by the `S_RFC` authorization object, ensuring that only users with the necessary permissions can execute these functions. However, it has been identified that `S_RFC` checks alone may not be sufficient for secure execution of certain RFC function modules covered by this note. To address this, new authorization checks have been implemented and are delivered as inactive to maintain compatibility with existing processes. These checks can be activated manually using transaction `SACF`.

**Solution**

New switchable authorization checks have been implemented and can be activated through transaction `SACF`. The activation process involves:

1. **Creating the Authorization Scenario Definition:**
   - Start transaction `SACF` and verify if the scenario definition `CRM_FS_1` exists.
   - If not, download the `CRM_FS_1.txt` file attached to this note.
   - Use transaction `SACF_TRANSFER` to upload the scenario definition and assign it to the development package `CRM_LEASING_TOOLS`.

2. **Creating the Productive Authorization Scenario:**
   - Navigate to transaction `SACF`, select the scenario definition `CRM_FS_1`, and mark it as active or logging.
   - Active status will activate the authorization check and logging to the Security Audit Log.
   - Logging status allows you to identify users needing additional authorizations without enforcing the check.

3. **Activating Logging of SACF Relevant Audit Messages:**
   - Ensure the Security Audit Log is activated in transaction `SM19`.
   - Activate message IDs `DUO`, `DUP`, and `DUQ` for auditing authorization checks.

4. **Adjusting User Roles:**
   - Use report `RSAU_SELECT_EVENTS` to identify users requiring additional authorizations.
   - Update user roles accordingly to comply with the new authorization scenario.

**Support Packages**

The following support packages are available for different versions of the `BBPCRM` software component:

- BBPCRM 700: [SAPKU70018](https://me.sap.com/supportpackage/SAPKU70018)
- BBPCRM 701: [SAPKU70115](https://me.sap.com/supportpackage/SAPKU70115)
- BBPCRM 702: [SAPKU70217](https://me.sap.com/supportpackage/SAPKU70217)
- BBPCRM 712: [SAPKU71210](https://me.sap.com/supportpackage/SAPKU71210)
- BBPCRM 713: [SAPKU71312](https://me.sap.com/supportpackage/SAPKU71312)
- BBPCRM 714: [SAPK-71402INBBPCRM](https://me.sap.com/supportpackage/SAPK-71402INBBPCRM)

**Correction Instructions**

Technical implementation can be performed via support package or correction instructions. After implementation, activation of the authorization checks is required as outlined in the solution steps above.

**Attachments**

- [CRM_FS_1.TXT](https://me.sap.com/sap/support/sapnotes/public/services/attachment.htm?iv_key=012003146900001801252015&iv_version=0001&iv_guid=6CAE8B27F67B1ED6828AB098F58D6D2A)

**References**

- [SAP Note 2236076](https://me.sap.com/notes/2236076): Architectural change to avoid syntax errors when calling `CL_RFC=>CHECK_EXTERNAL` and `CL_SACF=>AUTH_CHECK_SPEC`.

**Preconditions**

Ensure that SAP Note 2236076 is applied for the following releases of the `BBPCRM` component:

- 700
- 701
- 702
- 713

**Valid Software Components**

- BBPCRM 700 to 714

For detailed instructions and additional information, refer to the full SAP note [2233831](https://me.sap.com/notes/2233831).

*Credits to [RedRays](https://redrays.io) for support in providing this information.*