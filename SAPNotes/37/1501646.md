SAP Security Note 1501646 - Unauthorized use of functions in CRM Web Channel

```markdown
**SAP Security Note 1501646 - Unauthorized use of functions in CRM Web Channel**

**Released On:** April 18, 2011  
**Category:** Program Error  
**Priority:** Correction with High Priority  
**Status:** Released for Customer  
**SAP Component:** Customer Relationship Management > Internet Sales (CRM-ISA)

### Symptom
A malicious user can execute functions from Web Channel applications without proper authentication and authorization.

### Reason and Prerequisites
Web Channel applications execute certain functions by making HTTP requests with specific parameters. If a malicious user tricks an authenticated user's browser into making these requests, they can execute functions with the user's permissions. This can be exploited through cross-site scripting (XSS) vulnerabilities or by sending specially crafted links to users via email or other means.

### Solution
CRM Web Channel applications now include protection against XSRF/CSRF attacks.

- **For SAP CRM 7.01 Support Package 3 and Later:** XSRF/CSRF protection is enabled by default as part of the standard system.
- **For Older Releases:** Apply the necessary Support Package patches listed in this note to enable XSRF/CSRF protection.

**Configuration Steps:**
1. **Enable XSRF/CSRF Protection:**
   - Set the parameter `xsrf.protection.enabled` to `true` in the Web Container Service on the SAP Application Server Java (J2EE) being used.
   - Refer to [SAP Note 1450166](https://me.sap.com/notes/1450166) for detailed instructions.

2. **Additional Settings for B2B Applications:**
   - If integrating Web Channel applications with the SAP NetWeaver Portal, ensure the parameter `isXsrfPortalScenario` is set to `true` in Extended Configuration Management (XCM) within the `scenario_security` component of your XCM application configuration.

### Actions
- [Download for SNOTE](https://notesdownloads.sap.com/note/0040000017088452017)
- [PDF Version](https://userapps.support.sap.com/sap/support/sfm/notes/print/0001501646?language=en-US&token=76A7A802F461E269233A8E02400E881C)
- [Show Changes](https://me.sap.com/notesLatestChanges/0001501646/E/diff)

### References
This document refers to:
- [SAP Note 1575499 - Update #1 to Security Note 1501646](https://me.sap.com/notes/0001575499)
- [SAP Note 1818241 - Cumulative Fix to Various Web Channel XSRF Related Issues](https://me.sap.com/notes/1818241)
- [SAP Note 1626809 - XSRF Protection for Customer Enhancements of CRM Web Channel](https://me.sap.com/notes/1626809)

### Validity
Applicable Software Components include, but are not limited to:
- **SAP-CRMJAV:** Versions 5.0, 5.2, 6.0, 700, 701
- **SAP-CRMWEB:** Versions 5.0, 5.2, 6.0, 700, 701
- **SAP-SHRWEB:** Versions 5.0, 5.2, 6.0, 700, 701
- **SAP-SHRJAV:** Versions 5.0, 5.2, 6.0, 700, 701
- **SAP-CRMAPP:** Versions 5.0, 5.2, 6.0, 700, 701
- **SAP-SHRAPP:** Versions 5.0, 5.2, 6.0, 7.0, 700, 701

### Support Package Patches
Several Support Package Patches are available to address this issue across different software component versions. For detailed patch information and download links, please refer to the [Support Package Patches](https://notesdownloads.sap.com/note/0040000017088452017) section of this note.

---

_Credits to [redrays.io](https://redrays.io) for support in providing this information._
```