SAP Note 2069864: Switchable Authorization Checks for RFC in IBAN Maintenance

## Description

This SAP Note introduces **switchable authorization checks** for Remote Function Call (RFC) function modules within IBAN maintenance. These checks enhance system security by ensuring that only authorized users can execute specific RFC functions related to IBAN data.

## Affected Components

- **Software Component:** CA-BK (Cross-Application Components > Bank)
- **Affected RFC Function Modules:**
  - `BAPI_IBAN_CHANGE`
  - `BAPI_IBAN_CREATE`
  - `BAPI_IBAN_GETDETAIL`
  - `BAPI_IBAN_SAVEREPLICA`

## Solution

The solution involves activating the new switchable authorization checks through the **SACF** transaction. The checks are delivered inactive to maintain compatibility with existing processes and can be activated manually. Below are the implementation steps:

### Implementation Steps

**Step 1: Technical Implementation**
1. **Download the Correction File:**
   - [Download SACF_CA_TIBAN.TXT](https://userapps.support.sap.com/sap/support/sapnotes/public/services/attachment.htm?iv_key=012003146900000946222014&iv_version=0001&iv_guid=8A1A643DE654C245AB7EA69527462DE0)
2. **Upload Scenario Definition:**
   - Start transaction **SACF_TRANSFER**.
   - Select the "Upload" radio button and choose "Scenario Definition".
   - Deselect "Productive Scenarios" and "Test Mode".
   - Execute and upload the downloaded `SACF_CA_TIBAN.TXT` file.
   - Assign the scenario definition `CA_TIBAN` to the development package `BF_BANK`.

**Step 2: Create Productive Authorization Scenario**
1. Start transaction **SACF** in the development system.
2. Select "Scenario Definition" and choose `CA_TIBAN`.
3. Execute and double-click on the scenario definition.
4. Press the "Scenario" button or hit F5 to transfer to a productive scenario.
5. Choose the initial scenario status:
   - **Active:** Activates both authorization checks and logging to the Security Audit Log.
   - **Logging:** Activates only logging, allowing authorization checks to pass for identifying required authorizations.

**Step 3: Configure Security Audit Log**
1. Ensure Security Audit Log is activated by checking in transaction **SM19** under **Environment > Profile Parameters**.
2. Create a new filter in the active Security Audit Log configuration to capture relevant audit messages:
   - **Non-Critical Events:**
     - DUO: Authorization check on object &A in scenario &B successful.
     - DUP: Authorization check on object &A in scenario &B failed.
   - **Critical Events:**
     - DUQ: Active scenario &A for switchable authorization check was changed - &B.
3. Activate the new filter.

**Step 4: Adjust User Roles**
1. Use report **RSAU_SELECT_EVENTS** to identify users requiring new authorizations based on audit messages.
2. Update user roles to include the necessary authorizations for the new authorization scenario.

## Download & Print

- [Download for SNOTE](https://notesdownloads.sap.com/note/0040000012299162017)
- [PDF Version](https://userapps.support.sap.com/sap/support/sfm/notes/print/0002069864?language=en-US&token=F7C64E143A7EBA48000F3EC1C1DFFC21)

## References

- [SAP Note 2078596: Further improvements for RFC security](https://me.sap.com/notes/2078596)

## Support Package

Applicable for Software Component **SAP_ABA** versions 700 to 740 with respective support packages:

- **SAP_ABA 700:** [SAPKA70032](https://me.sap.com/supportpackage/SAPKA70032)
- **SAP_ABA 701:** [SAPKA70117](https://me.sap.com/supportpackage/SAPKA70117)
- **SAP_ABA 702:** [SAPKA70217](https://me.sap.com/supportpackage/SAPKA70217)
- **SAP_ABA 710:** [SAPKA71019](https://me.sap.com/supportpackage/SAPKA71019)
- **SAP_ABA 711:** [SAPKA71114](https://me.sap.com/supportpackage/SAPKA71114)
- **SAP_ABA 730:** [SAPKA73013](https://me.sap.com/supportpackage/SAPKA73013)
- **SAP_ABA 731:** [SAPKA73115](https://me.sap.com/supportpackage/SAPKA73115)
- **SAP_ABA 740:** [SAPKA74010](https://me.sap.com/supportpackage/SAPKA74010)

## Correction Instructions

Follow the detailed manual activities outlined in the SAP Note to activate the switchable authorization checks.

## Credits

Information provided by [Redrays](https://redrays.io).