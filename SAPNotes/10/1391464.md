SAP Security Note 1391464 - Authorized access to SAPHTTP

---

### Overview

**SAP Note/KBA**: 1391464  
**Type**: SAP Security Note  
**Version**: 3  
**Recency**: New  
**Language**: English  
**Category**: Consulting  
**Priority**: Correction with medium priority  
**Status**: Released for Customer  
**Released On**: 09.02.2010  
**Component**: Basis Components > Basis Services/Communication Interfaces > Communication Services: Mail, Fax, SMS, Telephony > File Transfer via FTP

### Description

#### Symptom
The settings defined for SAPHTTP do not include authorization checks based on user or the source of the request. No authorization checks are performed in the system while starting the external program SAPHTTP.

**Note**: Every ABAP installation includes the external program SAPHTTP. To ensure system security, authorized access to this program is necessary and can be achieved by implementing this note. These settings need to be maintained regardless of whether SAPHTTP is used or not.

#### Other Terms
- **SAPHTTP**
- **Security settings**
- **Authorization check**

#### Reason and Prerequisites
**Prerequisite**: Note [1298433](https://me.sap.com/notes/1298433) ensures that the SAP Gateway Access Control Lists cannot be bypassed.

#### Solution
Implement an access control list in the SAP gateway to secure the system and prevent unauthorized access. The solution covers various scenarios based on the destination settings maintained using transaction SM59:

1. **Scenario A**: External Program started on the same application server.
2. **Scenario B**: External Program started on a Front End Machine.
3. **Scenario C**: External Program started on an Explicit Host where the call is initiated from the source application server ("src_as") to start SAPHTTP on the target application server ("trgt_as").
4. **Scenario D**: When the external program SAPHTTP is not used.

**Steps to Maintain Security Settings:**

1. **Maintain the "secinfo" File**
   - **Path**: `/usr/sap/<SID>/data/secinfo`
   - **Entries**:
     - **Scenarios A & B**:
       ```
       USER=<user name>, USER-HOST=local, HOST=local, TP=saphttp;
       ```
     - **Scenario C**:
       - **On "src_as"**:
         ```
         USER=<user name>, USER-HOST=local, HOST=<trgt_as>, TP=saphttp;
         ```
       - **On "trgt_as"**:
         ```
         USER=<user name>, USER-HOST=<src_as>, HOST=local, TP=saphttp;
         ```
     - **Scenario D**:
       ```
       USER=*, USER-HOST=local, HOST=local, TP=saphttp;
       ```

2. **Set Profile Parameter**
   - Use transaction **RZ11** to set the profile parameter `gw/sec_info` pointing to the location of the "secinfo" file.

3. **Activate Configuration File**
   - Use transaction **SMGW** and navigate to `Goto → Expert Functions → External Security → Read Again`.

4. **Maintain Gateway Logging (Optional)**
   - Use transaction **SMGW** and navigate to `Goto → Expert Functions → Logging`.

5. **Repeat Steps on All Application Server Instances**

**Important:**
- Entries in the "secinfo" file are case-sensitive.
- Maintain one entry for every authorized user or application server as required.
- Security settings become active only if the "secinfo" file exists with the corresponding entries for SAPHTTP.

Refer to [Note 110612](https://me.sap.com/notes/110612) for further details on "secinfo" file settings.

### Actions

- [Download for SNOTE](https://notesdownloads.sap.com/note/0040000016880622017)
- [PDF Version](https://userapps.support.sap.com/sap/support/sfm/notes/print/0001391464?language=en-US&token=E4F6D4F4D28928D4404335D4E6C6A10A)
- [Share by Email](#)
- [Open in New Window](#)

### References

**This document refers to:**
- [1305851 - Overview note: "reg_info" and "sec_info"](https://me.sap.com/notes/1305851)
- [1298433 - Bypassing security in reginfo & secinfo](https://me.sap.com/notes/1298433)
- [164203 - Problems with SAPHTTP](https://me.sap.com/notes/164203)

**This document is referenced by:**
- [1305851 - Overview note: "reg_info" and "sec_info"](https://me.sap.com/notes/1305851)
- [164203 - Problems with SAPHTTP](https://me.sap.com/notes/164203)

### Validity

| Software Component | From | To |
|--------------------|------|----|
| SAP_BASIS          | 46B  | 46D |
| SAP_BASIS          | 610  | 640 |
| SAP_BASIS          | 700  | 702 |
| SAP_BASIS          | 710  | 720 |

### Available Languages

- [Deutsch](https://me.sap.com/notes/0001391464/D)
- [日本語 (Machine Translation)](https://me.sap.com/notes/0001391464/J)
- [Português (Machine Translation)](https://me.sap.com/notes/0001391464/P)
- [Español (Machine Translation)](https://me.sap.com/notes/0001391464/S)
- [Français (Machine Translation)](https://me.sap.com/notes/0001391464/F)
- [Italiano (Machine Translation)](https://me.sap.com/notes/0001391464/I)
- [Русский (Machine Translation)](https://me.sap.com/notes/0001391464/R)
- [中文 (Machine Translation)](https://me.sap.com/notes/0001391464/1)
- [한국어 (Machine Translation)](https://me.sap.com/notes/0001391464/3)

### Credits

Credits to [Redrays.io](https://redrays.io) for support in providing this information.