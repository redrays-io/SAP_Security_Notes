1434761 - Storage of passwords for XI/PI service users

**Symptom**
Passwords of XI/PI service users are not stored in a secure store.

**Other Terms**
Exchange Infrastructure, process infrastructure, secure store, exchange profile, password, service user

**Reason and Prerequisites**
Source code and design.

**Solution**
**Option one:**

a. Import the relevant Support Package for your release:
- 7.00 SP 23
- 7.01 SP 9
- 7.02 SP 5
- 7.10 SP11
- 7.11 SP 6

b. Save a change (can also be a dummy change) in the exchange profile - for example, change the logon language of a service user, which you can change back after saving.

**Option 2 (not working for 7.01):**

a. Create the following objects in your system and then implement this SAP Note.

**Details about the objects:**

In 7.00/7.02/7.10 and 7.11, create objects in the package `SLD_DB_PERS`.

1. **Create the following ABAP classes (transaction SE24):**
   - `CL_LCR_EXPROFILE_SECSTORE`
     - Class Type: Usual ABAP Class
     - Description: Exchange Profile SecStore Handling
     - Final: Yes
     - Instantiation:
       - 7.00 / 7.01 / 7.02: Public
       - 7.10 / 7.11: Package
     - If possible, choose "Open for Package".
   - `CX_LCR_EXPROFILE_SECSTORE`
     - Class Type: Exception Class
     - Description: LCR Exchange Profile Exception
     - Final: Yes
     - Instantiation: Public
     - Superclass: `CX_STATIC_CHECK`

2. **Create the following XSLT transformation:**
   - `LCR_EXCHANGE_PROFILE`
     - Description: Transformation for Exchange Profile
     - Type: Simple Transformation

   **Source code:**
   ```xml
   <?sap.transform simple?>
   <tt:transform xmlns:tt="http://www.sap.com/transformation-templates">
     <tt:root name="MOVED_VALUE"/>
     <tt:template>
       <aiiparameters>
         <tt:cond>
           <tt:attribute name="moved" value-ref="MOVED_VALUE"/>
         </tt:cond>
         <tt:skip count="*"/>
       </aiiparameters>
     </tt:template>
   </tt:transform>
   ```

3. Change the BAdI `SECSTORE_APPLICATION` using transaction SE18:
   - Remove the "internal to SAP" indicator in the checkbox and save your changes.
   - Create a classic BAdI implementation (transaction SE19) with the implementation name "SECSTORE_LCR_PROFILE" and enter `CL_LCR_EXPROFILE_SECSTORE_HDL` as the implementation class. Then activate.
   - Revert the "SAP-internal" indicator in transaction SPAU.

4. Use transaction SE16 to create the following entry in table `RSECACHK`:
   - `PROGNAME = CL_LCR_EXPROFILE_SECSTORE=====CP`
   - `CHSUM = FDCC16AC314A75F4514DF3F422FD5FCE`
   - `PREFIX = %/PI/PROFILE/`

5. Create message class "LCR_EXPROFILE".

**b.** Save a change (can also be a dummy change) in the exchange profile - for example, change the logon language of a service user, save this change, and revert it to the previous value after saving.

**Prerequisites**
- Software Component: SAP_BASIS
- Relevant for versions 700 to 711 with specific Support Packages.

**Download and Additional Resources**
- [Download for SNOTE](https://me.sap.com/support/notes/0040000008462292017)
- [PDF Version](https://me.sap.com/support/notes/print/0001434761?language=en-US&token=923B1B70AEFAD8ABBA8BC78AD6809624)

For more detailed information and support packages, visit [SAP Support Portal](https://me.sap.com/).

*Credits to [Redrays.io](https://redrays.io) for support in providing this information.*