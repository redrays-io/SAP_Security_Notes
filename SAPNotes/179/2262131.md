2262131 - Switchable authorization checks for RFC in CRM-MSA-ADP and CRM-MT-MAS-ARS

**Description**

This SAP Security Note introduces new switchable authorization checks for RFC function modules in CRM-MSA-ADP and CRM-MT-MAS-ARS to enhance system security.

**Symptom**

Remote calls to RFC function modules were previously protected by the `S_RFC` authorization object. However, it was identified that `S_RFC` checks might not suffice for secure execution. This note addresses this by introducing additional authorization checks.

**Solution**

New switchable authorization checks have been implemented and delivered as inactive to maintain compatibility. To activate:

1. **Create New Authorization Object `CRM_MC_DOE`:**
   - **Check Existence:**
     - In transaction `SU21`, verify if `CRM_MC_DOE` exists. If it does, skip to the next step.
   - **Create Authorization Object:**
     - **Object:** `CRM_MC_DOE`
     - **Text:** Object for communication between DOE and Mobile Client
     - **Class:** `CDOE`
     - **Package:** `CRM_DATAEXCHANGE_MCA`
     - **Authorization Fields:** `ACTVT` (Allow value `45`)
   - **Regenerate `SAP_ALL`:**
     - After creation, regenerate `SAP_ALL` in transaction `SU21`.

2. **Implement Switchable Authorization Scenarios:**
   - **Scenario 1:** `CRM_MSA_ADP_DOE` – Used for handheld device sync with Mobile Clients.
     - **Affected RFC Function Modules:** Refer to the SAP Note for the complete list.
   - **Scenario 2:** `CRM_MT_ARS` – Transport Management Authorization.
     - **Affected RFC Function Modules:** Refer to the SAP Note for the complete list.

3. **Activate in Transaction SACF:**
   - **Upload Scenario Definitions:**
     - If scenarios do not exist, download the respective `.TXT` files from the attachments and upload them via transaction `SACF_TRANSFER`.
     - Assign the scenarios to their respective packages (`CRM_DATAEXCHANGE_MCA` for `CRM_MSA_ADP_DOE` and `MAR_TM` for `CRM_MT_ARS`).
   - **Activate Switchable Authorization Checks:**
     - Follow the steps outlined in [SAP Note 1922808](https://me.sap.com/notes/1922808) to ensure all required authorizations are in place and activate the checks.

**Support Packages**

- **BBPCRM 700:** [SAPKU70018](https://me.sap.com/supportpackage/SAPKU70018)
- **BBPCRM 701:** [SAPKU70115](https://me.sap.com/supportpackage/SAPKU70115)
- **BBPCRM 702:** [SAPKU70217](https://me.sap.com/supportpackage/SAPKU70217)
- **BBPCRM 712:** [SAPKU71210](https://me.sap.com/supportpackage/SAPKU71210)
- **BBPCRM 713:** [SAPKU71312](https://me.sap.com/supportpackage/SAPKU71312)
- **BBPCRM 714:** [SAPK-71402INBBPCRM](https://me.sap.com/supportpackage/SAPK-71402INBBPCRM)

**Preconditions**

Ensure you have [SAP Note 2236076](https://me.sap.com/notes/2236076) applied for CRM-BTX components.

**Attachments**

- [CRM_MT_ARS.TXT](https://userapps.support.sap.com/sap/support/sapnotes/public/services/attachment.htm?iv_key=012006153200002082382015&iv_version=0001&iv_guid=6CAE8B27F6DB1ED682D4891706A96F36)
- [CRM_MSA_ADP_DOE.TXT](https://userapps.support.sap.com/sap/support/sapnotes/public/services/attachment.htm?iv_key=012006153200002082382015&iv_version=0001&iv_guid=6EAE8B28A0491ED6A0F6616AB87440BF)

For detailed instructions, refer to the [SAP Note 2262131](https://me.sap.com/notes/2262131).

*Credits to [redrays.io](https://redrays.io) for support in providing this information.*