SAP Note 2263656 - Whitelist-based Clickjacking Framing Protection in HTMLB Java

**Symptom**

HTMLB does not protect its applications against Clickjacking attacks.

**Other Terms**

UI redressing attack, Clickjacking, Framing Protection, Framing, IFrame, UI Redressing, Clickjacking Whitelist, X-FRAME-OPTIONS, HTMLB

**Reason and Prerequisites**

Clickjacking is an UI-redressing attack where an attacker tricks a user into clicking on something different than the user is aware of. This attack leverages standard HTML features and does not exploit weaknesses in the application's code.

Further details can be found at [OWASP Clickjacking](https://www.owasp.org/index.php/Clickjacking).

**Solution**

Standard protection measures against Clickjacking (X-FRAME-OPTIONS header) are not suitable for common NetWeaver integration scenarios. Therefore, SAP provides a whitelist-based framework for NetWeaver technologies. This framework and its implementation are detailed in [SAP Note 2319727](https://me.sap.com/notes/2319727).

This SAP Note specifically addresses HTMLB. Apply the note to deploy this feature on the J2EE server.

**Manual Activities**

You need to perform the following manual activities separately in each system where you transport the Note for implementation.

**For NW 7.00, NW 7.01, NW 7.02:**
1. Log in to the Visual Admin application by navigating to `\\usr\sap\<SID>\<System Number>\j2ee\admin`.
2. Navigate to `Server X X_XXXX -> Services -> Configuration Adapter -> apps`.
3. Search for the application named `tc~lm~itsam~htmlb~app` under sap.com.
4. Open `application.global.properties` in edit mode.
5. Set the property `"clickjackingprotection"` to `"true"` and save.
6. Repeat for other server nodes if necessary.
7. Restart the J2EE server to apply changes.

**For NW 7.30, NW 7.31, NW 7.40, and NW 7.50:**
1. Log in to the NWA application.
2. Go to the Configuration tab.
3. Click on the Infrastructure tab.
4. Select Java System Properties.
5. In the second section, navigate to the "Application" tab.
6. Filter for `tc~lm~itsam~htmlb~app` in the "Name" column and select it.
7. Set the property `"clickjackingprotection"` to `"true"`.
8. Save the configuration and restart the J2EE engine.

**For NW 7.10 and NW 7.11:**
1. Log in to the Config Tool application via `\\usr\sap\<SID>\<System Number>\j2ee\configtool\configtool.bat`.
2. Navigate to `cluster-data -> applications -> sap.com`.
3. Search for `tc~lm~itsam~htmlb~app`.
4. Set the property `"clickjackingprotection"` to `"true"` and save.
5. Restart the J2EE server to apply changes.

For detailed steps and additional information, refer to [SAP Note 2263656](https://me.sap.com/notes/0002263656).

*Credits to [Redrays.io](https://redrays.io) for supporting information provided.*