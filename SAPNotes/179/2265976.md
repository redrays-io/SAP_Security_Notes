2265976 - Switchable authorization checks for RFC in Internet Sales

**SAP Note 2265976** introduces new switchable authorization checks for RFC function modules in Internet Sales, enhancing the security of remote calls by refining the authorization object `S_RFC`. This ensures that only users with the minimum required authorizations can execute specific RFC functions, mitigating potential security risks.

### **Symptom**
Remote calls to RFC function modules are protected by checks on the authorization object `S_RFC`. However, these checks might not be sufficient to ensure secure execution for certain RFC function modules in Internet Sales.

### **Solution**
Activate the new switchable authorization checks in transaction **SACF**. The checks are delivered inactive by default to maintain compatibility with existing processes. Follow these steps to implement the solution:

1. **Implementation of the Switchable Authorization Check:**
   - **Step 1:** Create the authorization scenario definition.
     - Start transaction **SACF** and verify if the scenario definition "CRM_ISALES_1" exists.
     - If not, download the file [CRM_ISALES_1.txt](https://me.sap.com/notes/0002265976/D) attached to this note.
     - Use transaction **SACF_TRANSFER** to upload and assign the scenario definition to the development package "CRM_ISALES".

   - **Step 2:** Create the productive authorization scenario.
     - In **SACF**, select "Scenario Definition" and execute.
     - Transfer the scenario definition to a productive scenario by setting the status to "Active" or "Logging".

   - **Step 3:** Activate logging of SACF relevant audit messages in the Security Audit Log.
     - Ensure Security Audit Log is activated in transaction **SM19**.
     - Activate message IDs **DUO**, **DUP**, and **DUQ** in the static Security Audit Log configuration.

   - **Step 4:** Adjust roles to provide necessary authorizations.
     - Use report **RSAU_SELECT_EVENTS** to identify users requiring additional authorizations.
     - Analyze audit messages **DUO** and **DUP** to update user roles accordingly.

### **Preconditions**
Ensure the following SAP Notes are applied to your system based on the component version:

- **BBPCRM 700 to 714:**
  - [1385348](https://me.sap.com/notes/1385348) - Global ISA status in the CRM backend system
  - [2236076](https://me.sap.com/notes/2236076) - Architectural change to avoid syntax errors when calling CL_RFC=>CHECK_EXTERNAL and CL_SACF=>AUTH_CHECK_SPEC
  - [1919713](https://me.sap.com/notes/1919713) - Input help for business partner role does not return any Customizing roles

### **Support Packages**
Apply the relevant support packages for your component version:

- **BBPCRM 700:** [SAPKU70018](https://me.sap.com/supportpackage/SAPKU70018)
- **BBPCRM 701:** [SAPKU70115](https://me.sap.com/supportpackage/SAPKU70115)
- **BBPCRM 702:** [SAPKU70217](https://me.sap.com/supportpackage/SAPKU70217)
- **BBPCRM 712:** [SAPKU71210](https://me.sap.com/supportpackage/SAPKU71210)
- **BBPCRM 713:** [SAPKU71312](https://me.sap.com/supportpackage/SAPKU71312)
- **BBPCRM 714:** [SAPK-71402INBBPCRM](https://me.sap.com/supportpackage/SAPK-71402INBBPCRM)

### **Attachments**
- [CRM_ISALES_1.TXT](https://userapps.support.sap.com/sap/support/sapnotes/public/services/attachment.htm?iv_key=012006153200000088332016&iv_version=0001&iv_guid=6CAE8B28A04B1EE682F3B1B14F912083) (700 bytes)

For detailed implementation instructions, refer to the manual activities section in the SAP Note.

**Credits:** Thanks to [Redrays](https://redrays.io) for supporting the provision of this information.